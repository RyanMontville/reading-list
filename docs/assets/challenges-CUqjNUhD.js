import"./style-Dh_Ea72S.js";import{b as d,a as c,c as x}from"./booksDatabase-DJWy7u37.js";let b=[];const y=document.querySelector("main");async function A(){const r=document.createElement("div"),u=b.map(async e=>{const o=document.createElement("article");o.setAttribute("class","card with-padding");const l=document.createElement("section");l.setAttribute("class","card-header");const n=document.createElement("div"),C=c("h2",e.challengeName);if(n.appendChild(C),e.startDate){const a=c("h3",`${e.startDate} - ${e.endDate}`);n.appendChild(a)}const g=c("h3",`Completed ${e.books.length} out of ${e.goal} books`);n.appendChild(g);const k=e.challengeDescription.replace(/(\\r\\n|\\n|\\r|[\r\n])/g,"<br>"),p=document.createElement("p");p.innerHTML=k,n.appendChild(p),l.appendChild(n);const t=document.createElement("button");t.setAttribute("type","button"),t.setAttribute("class","material-symbols-outlined"),t.textContent="expand_all",l.appendChild(t),o.appendChild(l);const E=e.books,m=document.createElement("section"),f=E.map(async a=>{const h=await d.getBookById(a.bookId);if(h){const s=document.createElement("div");s.setAttribute("class","challenge-book");const D=c("h2",a.index);s.appendChild(D);const v=x(h);return s.appendChild(v),s}return null});(await Promise.all(f)).filter(a=>a!==null).forEach(a=>{m.appendChild(a)});const i=m;return i.setAttribute("class","hide challenge-books"),o.appendChild(i),t.addEventListener("click",()=>{i.classList.toggle("hide"),t.textContent==="expand_all"?t.textContent="collapse_all":t.textContent="expand_all"}),o});(await Promise.all(u)).forEach(e=>{r.appendChild(e)}),y.appendChild(r)}async function w(){await d.initializeData(),b=await d.getAllChallenges(),await A()}w();
