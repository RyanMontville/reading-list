---
import type { Book } from "./Book";
import Tags from "./tags.astro";
import books from '../assets/books.json';

const months = ["Jabuary", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

function getYear(date: string) {
  let dateList = date.split("/");
  return dateList[2];
}

function formatDate(date: string) {
  let dateList = date.split("/");
  let monthNum = parseInt(dateList[0]);
  return months[monthNum - 1] + " " + dateList[2];
}

let books2021 = books.filter((book)=> {
  if (getYear(book.dateRead) === "2021") {
      return book;
  }
});

let books2022 = books.filter((book)=> {
  if (getYear(book.dateRead) === "2022") {
      return book;
  }
});

let books2023 = books.filter((book)=> {
  if (getYear(book.dateRead) === "2023") {
      return book;
  }
});

let books2024 = books.filter((book)=> {
  if (getYear(book.dateRead) === "2024") {
      return book;
  }
});

let books2025 = books.filter((book)=> {
  if (getYear(book.dateRead) === "2025") {
      return book;
  }
});
---

    <main>
      <h2 class="year">2021</h2>
      {books2021.map((book) => (
        <div class="book">
          <h2>{book.title}</h2>
          <h3>{book.authors}</h3>
          <p>Finished: {formatDate(book.dateRead)}</p>
          <Tags tags={book.tags} />
        </div>
      ))}
      <h2 class="year">2022</h2>
      {books2022.map((book) => (
        <div class="book">
          <h2>{book.title}</h2>
          <h3>{book.authors}</h3>
          <p>Finished: {formatDate(book.dateRead)}</p>
          <Tags tags={book.tags} />
        </div>
      ))}
      <h2 class="year">2023</h2>
      {books2023.map((book) => (
        <div class="book">
          <h2>{book.title}</h2>
          <h3>{book.authors}</h3>
          <p>Finished: {formatDate(book.dateRead)}</p>
          <Tags tags={book.tags} />
        </div>
      ))}
      <h2 class="year">2024</h2>
      {books2024.map((book) => (
        <div class="book">
          <h2>{book.title}</h2>
          <h3>{book.authors}</h3>
          <p>Finished: {formatDate(book.dateRead)}</p>
          <Tags tags={book.tags} />
        </div>
      ))}
      <h2 class="year">2025</h2>
      {books2025.map((book) => (
        <div class="book">
          <h2>{book.title}</h2>
          <h3>{book.authors}</h3>
          <p>Finished: {formatDate(book.dateRead)}</p>
          <Tags tags={book.tags} />
        </div>
      ))}
    </main>

<style>
  .year {
    text-align: center;
  }
  .book {
    background-color: white;
    padding: 25px;
    border-radius: 25px;
    margin: 10px 20px;
    box-shadow:
      0 1px 3px rgba(0, 0, 0, 0.12),
      0 1px 2px rgba(0, 0, 0, 0.24);
  }
</style>
